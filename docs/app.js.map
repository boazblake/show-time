{"version":3,"sources":["app/App.js","app/Http.js","app/Models.js","app/components/action-sheet.js","app/components/index.js","app/components/layout.js","app/components/modal.js","app/components/toast.js","app/index.js","app/initialize.js","app/pages/alarm.js","app/pages/fns.js","app/pages/home.js","app/pages/index.js","app/pages/search-page.js","app/routes/index.js","app/routes/main-routes.js","app/secrets.js"],"names":["toRoutes","mdl","acc","route","onmatch","args","path","fullroute","group","includes","state","isAuth","m","set","get","render","component","App","Routes","reduce","onProgress","e","lengthComputable","Model","loadingProgress","max","total","value","loaded","redraw","onLoad","onLoadStart","isLoading","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","_http","request","headers","url","contentType","method","_task","Task","rej","res","then","getTask","postTask","putTask","deleteTask","backEndlessBaseUrl","tvMazeSearchUrl","baseUrl","query","tvMazeShowByIdUrl","id","backendlessUrl","searchUrl","tvMazeBaseUrl","tvMazeDetailsUrl","http","Stream","paginate","page","total_pages","total_results","searchItem","showMenu","details","selected","currentList","domList","mode","toast","show","duration","status","msg","data","shows","errors","search","user","lists","showSettings","showAction","actionSheetController","create","header","buttons","handler","document","body","classList","toggle","window","matchMedia","text","x","present","searchShows","fork","HomeToolBar","view","attrs","map","list","onclick","listDom","closeSlidingItems","SearchToolBar","onremove","style","paddingTop","animated","placeholder","oninput","target","onkeyup","Toolbar","name","Footer","r","tab","slot","icon","Layout","children","Toast","modal","updateUserShows","dto","filter","tvmazeId","concat","dismissModal","onError","err","JSON","parse","stringify","response","message","error","onSuccess","addUserShows","updateShowDetails","update","chain","_","objectId","getShowDetails","Episode","getEpisode","episode","oninit","ep","href","label","src","image","airdate","season","number","Modal","oncreate","dom","modalController","backdropDismiss","dismiss","onbeforeremove","premiered","split","network","webChannel","listStatus","padding","trust","summary","notes","onchange","links","toastController","showCloseButton","color","root","module","hot","accept","process","env","NODE_ENV","console","log","navigator","addEventListener","serviceWorker","register","registration","catch","registrationError","require","Alarm","disabled","v","resetToast","makeToast","setTimeout","formatError","getEpisodeLink","makeHttps","formatDetailsLinks","undefined","formatEpisodeLinks","toEpisodeViewModel","_links","original","medium","toDetailsViewModel","genres","genre","replace","toSearchViewModel","toDbModel","type","rejectWithAttr","attr","updateResults","result","updateShowStatus","getShows","searchShowsTask","itemSelected","propIsDefined","not","showListSelection","updateListStatus","listType","createBody","updateOrder","order","length","toDto","addUserShowsTask","updateUserShowsTask","deleteShowTask","updateShowDetailsTask","getShowDetailsTask","getShowTvMazeDetailsTask","findShowInDbTask","filterShowsByListType","filterShowForUnselected","getEpisodeTask","episodeUrl","updatedShows","deleteShow","getShowsTask","showModal","otherList","Home","paddingLeft","side","SearchPage","idx","key","MainRoutes","isNav","options","tmdbApiKey","tmdbAuth","Authorization","tmdbBaseUrl","tvMazeApiKey","prismaUrl"],"mappings":"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","file":"docs/app.js","sourcesContent":["\nconst toRoutes = (mdl) => (acc, route) => {\n  acc[route.route] = {\n    onmatch: (args, path, fullroute) => {\n      if (route.group.includes(\"authenticated\") && !mdl.state.isAuth()) {\n        m.route.set(m.route.get())\n      }\n      mdl.state.route = route\n      route.onmatch(mdl, args, path, fullroute)\n    },\n    render: () => route.component(mdl),\n  }\n  return acc\n}\n\nconst App = (mdl) => mdl.Routes.reduce(toRoutes(mdl), {})\n\nexport default App\n","import { tvMazeApiKey, tvMazeBaseUrl } from \"./secrets.js\"\nimport Task from \"data.task\"\nimport Model from \"./Models.js\"\n\nfunction onProgress(e) {\n  if (e.lengthComputable) {\n    // console.log(\"onprogress\", e.total, e.loaded)\n    Model.state.loadingProgress.max(e.total)\n    Model.state.loadingProgress.value(e.loaded)\n    m.redraw()\n  }\n}\n\nfunction onLoad() {\n  return false\n}\n\nfunction onLoadStart() {\n  Model.state.isLoading(true)\n  return false\n}\nfunction onLoadEnd() {\n  Model.state.isLoading(false)\n  Model.state.loadingProgress.max(0)\n  Model.state.loadingProgress.value(0)\n  return false\n}\n\nconst xhrProgress = {\n  config: (xhr) => {\n    // console.log(xhr)\n    xhr.onprogress = onProgress\n    xhr.onload = onLoad\n    xhr.onloadstart = onLoadStart\n    xhr.onloadend = onLoadEnd\n  }\n}\n\nconst _http = (mdl) => {\n  mdl.state.isLoading(!mdl.state.isLoading)\n  return m.request\n}\n\nconst headers = (url, args) => {\n  // let tmdbBearerToken = url.includes(\"themoviedb\") && tmdbAuth\n  let contentType =\n    { \"Content-Type\": \"application/json;charset=utf-8\" } &&\n    [\"Get\", \"POST\", \"PUT\", \"PATCH\"].includes(args.method)\n  return {\n    headers: {\n      // ...tmdbBearerToken,\n      ...contentType\n    }\n  }\n}\n\nconst _task = (url) => (args) =>\n  new Task((rej, res) =>\n    _http(Model)(url, { ...args, ...headers(url, args), ...xhrProgress }).then(\n      res,\n      rej\n    )\n  )\n\nconst getTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"GET\"\n  })\nconst postTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"POST\"\n  })\nconst putTask = (url, args = {}) => {\n  // console.log(args)\n  return _task(url)({\n    ...args,\n    method: \"PUT\"\n  })\n}\nconst deleteTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"DELETE\"\n  })\n\nconst backEndlessBaseUrl =\n  \"https://api.backendless.com/7F421158-889B-FD93-FF62-1ACDCD07AD00/1D9BEF3E-0CCC-D6C6-FF60-1A0B849A3E00/data/\"\n\nconst tvMazeSearchUrl = (baseUrl) => (query) =>\n  `${baseUrl}/search/shows?q=${query}`\n\nconst tvMazeShowByIdUrl = (baseUrl) => (id) => `${baseUrl}/shows/${id}`\n\nconst backendlessUrl = (url) => backEndlessBaseUrl + url\n\nconst searchUrl = (query) => tvMazeSearchUrl(tvMazeBaseUrl)(query)\nconst tvMazeDetailsUrl = (id) => tvMazeShowByIdUrl(tvMazeBaseUrl)(id)\n\nconst http = {\n  getTask,\n  postTask,\n  putTask,\n  deleteTask,\n  searchUrl,\n  tvMazeDetailsUrl,\n  backendlessUrl\n}\n\nexport default http\n","import Routes from './routes'\n\n\nconst state = {\n  isAuth: Stream(false),\n  route: \"\",\n  paginate: {\n    page: Stream(1),\n    total_pages: Stream(0),\n    total_results: Stream(0)\n  },\n  query: Stream(\"\"),\n  isLoading: Stream(false),\n  loadingProgress: {\n    max: Stream(null),\n    value: Stream(null)\n  },\n  searchItem: {\n    showMenu: Stream(false)\n  },\n  details: {\n    selected: Stream(null)\n  },\n  currentList: Stream(\"Watching\"),\n  domList: null,\n  mode: 'light',\n  toast: {\n  }\n}\n\nconst toast = {\n  show: Stream(false),\n  duration: Stream(2000),\n  status: Stream(null),\n  msg: Stream(null),\n}\n\nconst data = {\n  shows: Stream([]),\n  details: Stream(null)\n}\n\nconst errors = {\n  details: Stream(null),\n  search: Stream(null),\n  user: Stream(null),\n}\n\nconst user = {\n  shows: Stream([]),\n  lists: Stream([\"Watching\", \"Wishlist\"])\n}\n\nconst Model = {\n  toast,\n  Routes,\n  state,\n  user,\n  data,\n  errors\n}\n\nexport default Model\n","import { actionSheetController } from \"@ionic/core\"\nexport const showSettings = (mdl) => {\n  const showAction = () => {\n    actionSheetController\n      .create({\n        header: \"Settings\",\n        buttons: [\n          {\n            handler: () => {\n              mdl.state.mode = mdl.state.mode == 'light' ? 'dark' : 'light'\n              document.body.classList.toggle('dark')\n              window.matchMedia('(prefers-color-scheme: dark)');\n          }, text: mdl.state.mode == 'light' ? 'Enter Dark Mode' : 'Enter Light Mode'  },\n        ],\n      })\n      .then(x=> x.present())\n  }\n  showAction()\n}\n","export * from \"./layout.js\"\nexport * from './modal.js'\nexport * from './toast.js'\n","import Routes from \"../routes/index.js\"\nimport http from \"../Http.js\"\nimport { searchShowsTask, onError } from \"../pages/fns.js\"\nimport { showSettings } from './action-sheet'\nimport Toast from './toast'\n\nconst searchShows = (mdl) =>\n  searchShowsTask(mdl)(http).fork(onError(mdl)(\"search\"), mdl.data.shows)\n\nconst HomeToolBar = () => {\n  return {\n    view: ({attrs:{mdl}}) =>\n     m(\"ion-segment\", {\"value\":mdl.state.currentList()},\n       mdl.user.lists().map(list => m(\"ion-segment-button\", {\n         onclick: () => {\n           mdl.state.currentList(list)\n           mdl.state.listDom.closeSlidingItems()\n         }, \"value\": list\n       }, list))\n    )\n  }\n}\n\nconst SearchToolBar = () => {\n  return {\n    onremove: ({ attrs: { mdl } }) => mdl.state.query(null),\n    view: ({attrs:{mdl}}) =>\n      m('ion-searchbar',\n        {\n          style: {paddingTop:'12px'},\n          animated: true,\n          'show-cancel-button':\"focus\" ,\n          placeholder: 'Search for a show',\n           value: mdl.state.query(),\n            oninput: (e) => mdl.state.query(e.target.value),\n            onkeyup: () => searchShows(mdl)\n        }\n      )\n  }\n}\n\n\nconst Toolbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n       m(\"ion-header\", m(\"ion-toolbar\",\n         mdl.state.route.name == 'home' && m(HomeToolBar, {mdl}),\n         mdl.state.route.name == 'search' && m(SearchToolBar, {mdl})\n      ))\n    ,\n  }\n}\n\nconst Footer = () => {\n  return {\n    view: ({attrs:{mdl}}) => {\n      return m(\n        \"ion-footer\",\n        m(\n          \"ion-tab-bar\",\n          m(\"ion-tabs\", [\n            Routes.map((r) => m(\"ion-tab\", { tab: `${r.route}` })),\n            m(\"ion-tab-bar\", { slot: \"bottom\" }, [\n              Routes.map((r) =>\n                m(\n                  \"ion-tab-button\",\n                  {\n                    onclick: () => m.route.set(r.route),\n                    tab: `${r.route}`,\n                  },\n                  [m(\"ion-label\", r.name), m(\"ion-icon\", { name: r.icon })]\n                )\n              ),\n              m(\"ion-tab-button\",\n              {\n                onclick: () => showSettings(mdl),\n              },\n              [m(\"ion-label\", 'settings'), m(\"ion-icon\", { name: 'ellipsis-vertical-outline' })])\n            ]),\n          ])\n        )\n      )\n    },\n  }\n}\n\nexport const Layout = () => {\n  return {\n    view: ({ attrs: { mdl }, children }) => {\n      return m(\"ion-app\", [\n        m(Toolbar, { mdl }),\n        m(\"ion-content\", children),\n        m(Footer, { mdl }),\n        mdl.toast.show() && m(Toast, { mdl }),\n      ])\n    },\n  }\n}\n","import { modalController } from \"@ionic/core\"\nimport http from \"../Http\"\nimport {\n  getShowDetailsTask,\n  updateShowDetailsTask,\n  getEpisodeTask,\n  getShowTvMazeDetailsTask,\n  addUserShowsTask,\n  makeToast,\n} from \"../pages/fns\"\nimport { sortBy, prop } from \"ramda\"\n\nconst state = {\n  show: \"\",\n  modal: null,\n  status: null,\n}\n\nconst updateUserShows = (mdl) => (dto) =>\n  mdl.user.shows(\n    sortBy(\n      prop(\"name\"),\n      mdl.user\n        .shows()\n        .filter((show) => show.tvmazeId !== dto.tvmazeId)\n        .concat([dto])\n    )\n  )\n\nconst dismissModal = (mdl) => mdl.state.details.selected(null)\n\nconst onError = (mdl) => (err) => {\n  let msg = JSON.parse(JSON.stringify(err)).response.message\n  state.error = err\n  makeToast({ mdl, status: false, msg })\n}\n\nconst onSuccess = (show) => {\n  state.show = show\n  state.error = null\n}\n\nconst addUserShows = (mdl) => (show, list) =>\n  addUserShowsTask(mdl)(http)(show)(list).fork(onError(mdl), (shows) => {\n    mdl.user.shows(shows)\n    dismissModal(mdl)\n  })\n\nconst updateShowDetails = (mdl) => (update) =>\n  updateShowDetailsTask(mdl)(http)(update)\n    .chain((_) =>\n      getShowDetailsTask(http)(mdl.state.details.selected().objectId)\n    )\n    .fork(onError(mdl), (dto) => {\n      updateUserShows(mdl)(dto)\n      onSuccess(dto)\n      makeToast({ mdl, status: true, msg: \"Show successfully updated\" })\n    })\n\nconst getShowDetails = (mdl) =>\n  mdl.state.details.selected().objectId\n    ? getShowDetailsTask(http)(mdl.state.details.selected().objectId).fork(\n        onError(mdl),\n        onSuccess\n      )\n    : getShowTvMazeDetailsTask(http)(mdl.state.details.selected()).fork(\n        onError(mdl),\n        onSuccess\n      )\n\nconst Episode = () => {\n  let data\n  const getEpisode = (mdl) => (episode) =>\n    getEpisodeTask(http)(episode).fork(onError(mdl), (dto) => (data = dto))\n\n  return {\n    oninit: ({\n      attrs: {\n        mdl,\n        ep: { href },\n      },\n    }) => getEpisode(mdl)(href),\n    onremove: () => (data = null),\n    view: ({\n      attrs: {\n        ep: { label },\n      },\n    }) =>\n      data &&\n      m(\".\", [\n        m(\"h3\", label),\n        m(\"ion-img\", {\n          src: data.image,\n        }),\n        m(\n          \"ion-item\",\n          m(\"ion-label\", data.name),\n          m(\"p\", data.airdate),\n          m(\"ion-label\", \"Season - Ep:\"),\n          m(\"p\", `${data.season} - ${data.number}`)\n        ),\n      ]),\n  }\n}\n\nexport const Modal = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => getShowDetails(mdl, state),\n    oncreate: ({ dom }) => {\n      modalController\n        .create({\n          component: dom,\n          backdropDismiss: false,\n        })\n        .then((modal) => {\n          state.modal = modal\n          state.modal.present()\n        })\n    },\n    onremove: ({ attrs: { mdl } }) =>\n      state.modal &&\n      state.modal.dismiss().then(() => {\n        state.modal = null\n        state.show = null\n        dismissModal(mdl)\n      }),\n    onbeforeremove: ({ attrs: { mdl } }) =>\n      state.modal.dismiss().then(() => {\n        state.modal = null\n        state.show = null\n        dismissModal(mdl)\n      }),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"ion-modal-view\",\n        state.show && [\n          m(\n            \"ion-header\",\n            m(\n              \"ion-toolbar\",\n              m(\n                \"ion-title\",\n                `${state.show.name} - ${\n                  state.show.premiered && state.show.premiered.split(\"-\")[0]\n                } | ${state.show.network || state.show.webChannel}`\n              ),\n              m(\n                \"ion-buttons\",\n                { slot: \"primary\" },\n                m(\n                  \"ion-button\",\n                  { onclick: (e) => dismissModal(mdl) },\n                  m(\"ion-icon\", { slot: \"icon-only\", name: \"close\" })\n                )\n              )\n            ),\n            !state.show.listStatus &&\n              m(\n                \"ion-item\",\n                m(\"ion-label\", \"Add to: \"),\n                m(\n                  \"ion-buttons\",\n                  mdl.user\n                    .lists()\n                    .map((list) =>\n                      m(\n                        \"ion-button.ion-activatable ripple-parent\",\n                        { onclick: (e) => addUserShows(mdl)(state.show, list) },\n                        m(\"ion-ripple\"),\n                        list\n                      )\n                    )\n                )\n              )\n          ),\n          m(\n            \"ion-content\",\n            {\n              padding: true,\n            },\n            m(\n              \"ion-grid\",\n              m(\n                \"ion-row\",\n                m(\"ion-col\", m(\"ion-img\", { src: state.show.image })),\n                m(\"ion-col\", m.trust(state.show.summary))\n              ),\n              m(\n                \"ion-row\",\n                m(\"ion-col\", m(\"pre\", `status: ${state.show.status}`)),\n                m(\n                  \"ion-col\",\n                  state.show.listStatus &&\n                    m(\"pre\", `list status: ${state.show.listStatus}`)\n                )\n              ),\n              state.show.listStatus &&\n                m(\n                  \"ion-row\",\n                  m(\"ion-textarea\", {\n                    placeholder: \"Notes\",\n                    value: state.show.notes,\n                    onchange: (e) => (state.show.notes = e.target.value),\n                  }),\n                  m(\n                    \"ion-button\",\n                    {\n                      onclick: () =>\n                        updateShowDetails(mdl)({ notes: state.show.notes }),\n                    },\n                    \"Save note\"\n                  )\n                )\n            ),\n            m(\n              \"\",\n              m(\"h3\", \"Episodes\"),\n              state.show.links.map((ep) => m(Episode, { mdl, ep }))\n            )\n          ),\n        ]\n      ),\n  }\n}\n","import {toastController} from '@ionic/core'\n\nconst Toast = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m('ion-toast', {\n        oncreate: ({ dom }) => {\n          toastController.create({\n            component: dom,\n            message:mdl.toast.msg(),\n            duration: mdl.toast.duration(),\n            showCloseButton: true,\n            animated: true,\n            color: mdl.toast.status() ? 'success' : 'danger'\n          }).then(toast =>toast.present())\n        },\n      },\n      )\n  }\n}\n\n\n\nexport default Toast\n","import App from \"./App.js\"\nimport Model from \"Models\"\n\nconst root = document.body\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV == \"development\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\"âš™ï¸ SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\"ðŸ§Ÿ SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\nm.route(root, \"/home\", App(Model))\nm.route.set('/home')\n","document.addEventListener(\"DOMContentLoaded\", () => require(\"./index.js\"))\n","export const Alarm = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \".alarm\",\n        m(\"ion-list\", [\n          m(\"ion-item\", m(\"ion-input\", { placeholder: \"Title\" })),\n          m(\"ion-item\", m(\"ion-input\", { placeholder: \"Location\" })),\n          m(\"ion-item-divider\"),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Start Date\"),\n            m(\"ion-datetime\", {\n              value: \"1990-02-19\",\n              placeholder: \"Select Date\",\n            }),\n          ]),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Start Time\"),\n            m(\"ion-datetime\", {\n              \"display-format\": \"h:mm A\",\n              \"picker-format\": \"h:mm A\",\n              value: \"1990-02-19T07:43Z\",\n            }),\n          ]),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Ends\"),\n            m(\"ion-datetime\", {\n              value: \"1990-02-20\",\n              placeholder: \"Select Date\",\n            }),\n          ]),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Repeat\"),\n            m(\"ion-datetime\", { placeholder: \"Never\", disabled: false }),\n          ]),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Travel Time\"),\n            m(\"ion-datetime\", { placeholder: \"None\", disabled: false }),\n          ]),\n          m(\"ion-item-divider\"),\n          m(\"ion-item\", [\n            m(\"ion-label\", \"Alert\"),\n            m(\"ion-datetime\", { placeholder: \"None\", disabled: false }),\n          ]),\n        ])\n      )\n    },\n  }\n}\n","import {\n  anyPass,\n  assoc,\n  compose,\n  equals,\n  filter,\n  find,\n  join,\n  lensPath,\n  lensProp,\n  map,\n  not,\n  over,\n  pluck,\n  propEq,\n  prop,\n  reject,\n  set,sortBy,\n  view,\n} from \"ramda\"\n\nexport const log = m => v => {\n  console.log(m, v)\n  return v\n}\n\nconst resetToast = mdl => {\n  mdl.toast.show(false)\n  mdl.toast.msg(null)\n  mdl.toast.status(null)\n\n}\n\nexport const makeToast = ({ mdl, status, msg }) => {\n  mdl.toast.show(true)\n  mdl.toast.status(status)\n  mdl.toast.msg(msg)\n  setTimeout(() => resetToast(mdl),  mdl.toast.duration()  )\n}\n\nexport const formatError = error => JSON.parse(JSON.stringify(error))\n\n const getEpisodeLink = label => path => links =>\n  ({label, href: makeHttps(view(lensPath([path, \"href\"]), links))})\n\nconst formatDetailsLinks = links => [\n      getEpisodeLink('previous')(\"previousepisode\")(links),\n      getEpisodeLink('next')(\"nextepisode\")(links)\n    ].filter(ep => !propEq('href', undefined)(ep))\n\nconst formatEpisodeLinks = links => [\n      getEpisodeLink('self')('self')(links)\n    ].filter(ep => !propEq('href', undefined)(ep))\n\n\n\nconst toEpisodeViewModel = ({\n  name,\n  season,\n  number,\n  airdate,\n  image,\n  _links\n}) => ({\n  name,\n  season,\n  number,\n  airdate,\n  image: image && (makeHttps(image.original) || makeHttps(image.medium)),\n  links: formatEpisodeLinks(_links)\n})\n\nconst toDetailsViewModel = ({\n  image,\n  tvmazeId,\n  objectId,\n  listStatus,\n  name,\n  notes,\n}) => ({\n  webChannel,\n  status,\n  network,\n  genres,\n  premiered,\n  summary,\n  _links\n}) => ({\n  name,\n  notes,\n  genre: join(\" \", genres),\n  premiered,\n  summary,\n  links: formatDetailsLinks(_links),\n  image,\n  tvmazeId,\n  objectId,\n  listStatus,\n  webChannel: webChannel && webChannel.name,\n  network: network && network.name,\n  status\n})\n\nconst makeHttps = url => url && url.replace(\"http\", \"https\")\n\nexport const toSearchViewModel = ({ name, image, id }) => ({\n  image: image && (makeHttps(image.original) || makeHttps(image.medium)),\n  tvmazeId: id,\n  name\n})\n\nexport const toDbModel = ({ listStatus, notes, name, tvmazeId, image, status }) => ({\n  image,\n  listStatus,\n  notes,\n  name,\n  tvmazeId,\n  status\n})\n\nexport const onError = mdl => type => error => mdl.errors[type](error)\n\nconst rejectWithAttr = attr => value => reject(propEq(attr, value))\n\nconst updateResults = result => show => {\n  if (show) {\n    return assoc(\n      \"objectId\",\n      show.objectId,\n      set(lensProp(\"listStatus\"), prop(\"listStatus\", show), result)\n    )\n  } else {\n    return result\n  }\n}\n\nexport const updateShowStatus = shows => data =>\n  data.map(r =>\n    compose(\n      updateResults(r),\n      find(propEq(\"tvmazeId\", r.tvmazeId))\n    )(shows)\n  )\n\nexport const getShows = http =>\n  http.getTask(http.backendlessUrl(\"prodshows?pagesize=100\")).map(sortBy(propEq('name')))\n\nexport const searchShowsTask = mdl => http =>\n  http\n    .getTask(http.searchUrl(mdl.state.query()))\n    .map(pluck(\"show\"))\n    .map(map(toSearchViewModel))\n    .map(rejectWithAttr(\"image\")(null))\n    .map(updateShowStatus(mdl.user.shows()))\n\nconst itemSelected = mdl => result =>\n  equals(prop(\"tvmazeId\", result), mdl.state.searchItem.showMenu())\n\nexport const propIsDefined = attr =>\n  compose(\n    not,\n    propEq(attr, undefined)\n  )\n\nexport const showListSelection = mdl =>\n  anyPass([itemSelected(mdl), propIsDefined(\"objectId\")])\n\nconst updateListStatus = show => listType =>\n  over(lensProp(\"listStatus\"), () => listType, show)\n\nconst createBody = dto => ({\n  body: toDbModel(dto)\n})\n\nconst updateOrder = mdl => show => {\n  show.order = filter(\n    propEq(\"listStatus\", show.listStatus),\n    mdl.user.shows()\n  ).length\n  return show\n}\n\nexport const toDto = (mdl, show, listType) =>\n  compose(\n    createBody,\n    updateOrder(mdl),\n    updateListStatus(show)\n  )(listType)\n\nexport const addUserShowsTask = mdl => http => show => list =>   http\n  .postTask(http.backendlessUrl(\"prodshows\"), toDto(mdl, show, list))\n  .chain(_ => getShows(http))\n  .map(mdl.user.shows)\n\nexport const updateUserShowsTask = mdl => http => show => list =>\n  http\n    .putTask(\n      http.backendlessUrl(`prodshows\\\\${show.objectId}`),\n      toDto(mdl, show, list)\n    )\n    .chain(_ => getShows(http))\n\nexport const deleteShowTask = http => id =>\n  http\n    .deleteTask(http.backendlessUrl(`prodshows/${id}`))\n    .chain(_ => getShows(http))\n\nexport const updateShowDetailsTask = mdl => http => dto =>\n  http\n    .putTask(http.backendlessUrl(`prodshows/${mdl.state.details.selected().objectId}`), {\n      body: dto\n    })\n    .chain(({ objectId }) => getShowDetailsTask(http)(objectId))\n\nexport const getShowTvMazeDetailsTask = http => show =>\n  http\n    .getTask(http.tvMazeDetailsUrl(show.tvmazeId))\n    .map(toDetailsViewModel(show))\n\nconst findShowInDbTask = http => id =>\n  http.getTask(http.backendlessUrl(`prodshows/${id}`))\n\nexport const getShowDetailsTask =  http => id =>\n  findShowInDbTask(http)(id).chain(getShowTvMazeDetailsTask(http))\n\nexport const filterShowsByListType = mdl =>\n  filter(propEq(\"listStatus\", mdl.state.currentList()), mdl.user.shows())\n\nexport const filterShowForUnselected = mdl => {\n  let selected = pluck('tvmazeId',mdl.user.shows())\n  return mdl.data.shows().filter(show=> !selected.includes(show.tvmazeId))\n}\n\nexport const getEpisodeTask = http => episodeUrl =>\n  http.getTask(episodeUrl).map(toEpisodeViewModel)\n","import { without } from \"ramda\"\nimport http from \"../Http.js\"\nimport {\n  getShows,\n  filterShowsByListType,\n  updateUserShowsTask,\n  deleteShowTask,\n  onError\n} from \"./fns.js\"\nimport { Modal } from 'components'\nimport {sortBy, prop} from 'ramda'\n\n\nconst updateUserShows = (mdl) => (show, list) =>\n  updateUserShowsTask(mdl)(http)(show)(list).fork(\n    onError(mdl)(\"search\"),\n    (updatedShows) => {\n      m.route.set(\"/home\")\n      mdl.user.shows(sortBy(prop('name'),updatedShows))\n    }\n  )\n\n\nconst deleteShow = (mdl) => (show) =>\n  deleteShowTask(http)(show.objectId).fork(\n    onError(mdl)(\"details\"),\n    (updatedShows) => {\n      m.route.set(\"/home\")\n      mdl.user.shows(sortBy(prop('name'),updatedShows))\n    }\n    )\n\nconst getShowsTask = (mdl) => (http) =>\n  getShows(http).fork(mdl.errors, mdl.user.shows)\n\nconst showModal = (mdl, show) =>\n    mdl.state.details.selected(show)\n\n\nconst otherList = (mdl) =>  without([mdl.state.currentList()], mdl.user.lists())[0]\n\nexport const Home = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => getShowsTask(mdl)(http),\n    view: ({ attrs: { mdl } }) => {\n      return mdl.state.details.selected() ? m(Modal, {mdl})\n        : m('ion-list',\n          {\n            oncreate: ({ dom }) => {\n              mdl.state.listDom = dom\n              dom.closeSlidingItems()\n            }\n          },\n          sortBy(prop('name'), filterShowsByListType(mdl)).map(\n            (show) =>\n              // show.listStatus == mdl.state.currentList() &&\n              m('ion-item-sliding',\n                m('ion-item',\n                  {\n                    onclick: () => {\n                      showModal(mdl, show)\n                      mdl.state.listDom.closeSlidingItems()\n                    }\n                  },\n                m('ion-thumbnail', m('ion-img', { src: show.image })),\n                  m('ion-label',\n                  {style:{paddingLeft:'12px'}},\n                  m('h2', show.name),\n                  m('p', m('i',show.status)),\n                  m('p', show.notes)\n                ),\n                ),\n                m('ion-item-options',\n                  {\n                       side: 'start',\n                  },\n                m('ion-item-option', {\n                  onclick: () => {\n                    updateUserShows(mdl)(show, otherList(mdl))\n                    mdl.state.listDom.closeSlidingItems()\n                  }\n                }, `move to ${otherList(mdl)}`)\n                ),\n                m('ion-item-options',\n                 m('ion-item-option', {\n                  color: 'danger',\n                  side: 'end',\n                   onclick: () => {\n                     deleteShow(mdl)(show)\n                     mdl.state.listDom.closeSlidingItems()\n                   }\n                  }, 'Delete'))\n            )\n        )\n      )\n    },\n  }\n}\n","export * from \"./home.js\"\nexport * from \"./search-page.js\"\n","\nimport http from \"../Http.js\"\nimport {\n  filterShowForUnselected,\n  addUserShowsTask,\n  onError,\n  } from \"./fns.js\"\nimport {Modal} from 'components'\n\nconst addUserShows = (mdl) => (show, list) =>\n  addUserShowsTask(mdl)(http)(show)(list).fork(onError(mdl)(\"search\"), mdl.user.shows)\n\n\nconst showModal = (mdl, show) =>\n    mdl.state.details.selected(show)\n\n\nexport const SearchPage = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return mdl.state.details.selected() ? m(Modal, {mdl})\n        : m('ion-list',\n          {\n            oncreate: ({ dom }) => {\n              mdl.state.listDom = dom\n              dom.closeSlidingItems()\n            }\n          },\n          filterShowForUnselected(mdl).map(\n            (show, idx) =>\n              m('ion-item-sliding',\n                {\n                  key: idx,\n                },\n                m('ion-item',\n                  {onclick:() => showModal(mdl, show)},\n                  m('ion-thumbnail', {style:{'border-radius': '0'}}, m('ion-img', { src: show.image })),\n                  m('ion-label',\n                  {style:{paddingLeft:'12px'}},\n                  m('h2', show.name),\n                ),\n              ),\n                m('ion-item-options',\n                {side:'start'},\n                  mdl.user.lists().map(list => m('ion-item-option', {\n                    onclick: () => {\n                      addUserShows(mdl)(show, list)\n                      mdl.state.listDom.closeSlidingItems()\n                    }\n                  }, list))\n              )\n            )\n        )\n      )\n    },\n  }\n}\n","import MainRoutes from \"./main-routes.js\"\nimport { flatten } from \"ramda\"\n\nconst Routes = flatten([MainRoutes])\nexport default Routes\n","import { Home, Alarm, SearchPage } from \"pages\"\nimport { Layout } from \"components\"\n\nconst Routes = [\n  {\n    id: \"home\",\n    name: \"home\",\n    icon: \"home\",\n    route: \"/home\",\n    isNav: false,\n    group: [],\n    children: [],\n    options: [],\n    onmatch: (mdl, args, path, fullroute) => {},\n    component: (mdl) => m(Layout, { mdl }, m(Home, { mdl })),\n  },\n    {\n    id: \"search\",\n    name: \"search\",\n    icon: \"search-outline\",\n    route: \"/search\",\n    isNav: false,\n    group: [],\n    children: [],\n    options: [],\n    onmatch: (mdl, args, path, fullroute) => {},\n    component: (mdl) => m(Layout, { mdl }, m(SearchPage, { mdl })),\n  }\n]\n\nexport default Routes\n","export const tmdbApiKey = \"1e4d78ab60660282c63379725fc9b111\"\nexport const tmdbAuth = {\n  Authorization:\n    \"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxZTRkNzhhYjYwNjYwMjgyYzYzMzc5NzI1ZmM5YjExMSIsInN1YiI6IjVkYmNjMjBjOTdhNGU2MDAxNTdjNjkxYyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.TgL91o4VHyQo4cm3KLx6nVICyrn8E8pXDC1zMdlDFsU\"\n}\nexport const tmdbBaseUrl = \"https://api.themoviedb.org/3\"\n\nexport const tvMazeApiKey = \"F4-A2-dEzYi0oXvzbNWON3_nrnPSt9Yv\"\nexport const tvMazeBaseUrl = \"https://api.tvmaze.com\"\nexport const prismaUrl =\n  \"https://eu1.prisma.sh/boaz-blake-8951e1/whensMyShow/dev\"\n"]}