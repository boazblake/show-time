!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},o={},a={}.hasOwnProperty,s=/^\.\.?(\/|$)/,n=function(e,t){for(var r,o=[],a=(s.test(t)?e+"/"+t:t).split("/"),n=0,i=a.length;n<i;n++)".."===(r=a[n])?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t,o){var a,s={id:t,exports:{},hot:p&&p.createHot(t)};return r[t]=s,o(s.exports,(a=t,function(t){var r=n(i(a),t);return e.require(r,a)}),s),s.exports},u=function(e){var t=o[e];return t&&e!==t?u(t):e},d=function(e,o){null==o&&(o="/");var s=u(e);if(a.call(r,s))return r[s].exports;if(a.call(t,s))return l(s,t[s]);throw new Error("Cannot find module '"+e+"' from '"+o+"'")};d.alias=function(e,t){o[t]=e};var c=/\.[^.\/]+$/,m=/\/index(\.[^\/]+)?$/;d.register=d.define=function(e,s){if(e&&"object"==typeof e)for(var n in e)a.call(e,n)&&d.register(n,e[n]);else t[e]=s,delete r[e],function(e){if(c.test(e)){var t=e.replace(c,"");a.call(o,t)&&o[t].replace(c,"")!==t+"/index"||(o[t]=e)}if(m.test(e)){var r=e.replace(m,"");a.call(o,r)||(o[r]=e)}}(e)},d.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var p=e._hmr&&new e._hmr((function(e,t){return u(n(i(e),t))}),d,t,r);d._cache=r,d.hmr=p&&p.wrap,d.brunch=!0,e.require=d}}(),function(){"undefined"==typeof window||window;require.register(".secrets.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.db=e.prismaUrl=e.tvMazeBaseUrl=e.tvMazeApiKey=e.tmdbBaseUrl=e.tmdbAuth=e.tmdbApiKey=void 0;e.tmdbApiKey="1e4d78ab60660282c63379725fc9b111";e.tmdbAuth={Authorization:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxZTRkNzhhYjYwNjYwMjgyYzYzMzc5NzI1ZmM5YjExMSIsInN1YiI6IjVkYmNjMjBjOTdhNGU2MDAxNTdjNjkxYyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.TgL91o4VHyQo4cm3KLx6nVICyrn8E8pXDC1zMdlDFsU"};e.tmdbBaseUrl="https://api.themoviedb.org/3";e.tvMazeApiKey="F4-A2-dEzYi0oXvzbNWON3_nrnPSt9Yv";e.tvMazeBaseUrl="https://api.tvmaze.com";e.prismaUrl="https://eu1.prisma.sh/boaz-blake-8951e1/whensMyShow/dev";e.db="prodshows"})),require.register("App.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=e=>e.Routes.reduce((e=>(t,r)=>(t[r.route]={onmatch:(t,o,a)=>{r.group.includes("authenticated")&&!e.state.isAuth()&&m.route.set(m.route.get()),e.state.route=r,r.onmatch(e,t,o,a)},render:()=>r.component(e)},t))(e),{});e.default=o})),require.register("Http.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("./.secrets.js"),a=n(t("data.task")),s=n(t("./Models.js"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){e.lengthComputable&&(s.default.state.loadingProgress.max(e.total),s.default.state.loadingProgress.value(e.loaded),m.redraw())}function c(){return!1}function p(){return s.default.state.isLoading(!0),!1}function f(){return s.default.state.isLoading(!1),s.default.state.loadingProgress.max(0),s.default.state.loadingProgress.value(0),!1}var h={config:e=>{e.onprogress=d,e.onload=c,e.onloadstart=p,e.onloadend=f}},g=e=>t=>new a.default((r,o)=>{return(a=s.default,a.state.isLoading(!a.state.isLoading),m.request)(e,l(l(l({},t),((e,t)=>({headers:l({},{"Content-Type":"application/json;charset=utf-8"}&&["Get","POST","PUT","PATCH"].includes(t.method))}))(0,t)),h)).then(o,r);var a}),v={getTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e)(l(l({},t),{},{method:"GET"}))},postTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e)(l(l({},t),{},{method:"POST"}))},putTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e)(l(l({},t),{},{method:"PUT"}))},deleteTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e)(l(l({},t),{},{method:"DELETE"}))},searchUrl:e=>{return(t=o.tvMazeBaseUrl,e=>"".concat(t,"/search/shows?q=").concat(e))(e);var t},tvMazeDetailsUrl:e=>{return(t=o.tvMazeBaseUrl,e=>"".concat(t,"/shows/").concat(e))(e);var t},backendlessUrl:e=>"https://api.backendless.com/7F421158-889B-FD93-FF62-1ACDCD07AD00/1D9BEF3E-0CCC-D6C6-FF60-1A0B849A3E00/"+e};e.default=v})),require.register("Models.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=(o=t("./routes"))&&o.__esModule?o:{default:o},s=t("./.secrets");var n={isAuth:Stream(!1),route:"",paginate:{page:Stream(1),total_pages:Stream(0),total_results:Stream(0)},query:Stream(""),isLoading:Stream(!1),loadingProgress:{max:Stream(null),value:Stream(null)},searchItem:{showMenu:Stream(!1)},details:{selected:Stream(null)},currentList:Stream("Watching"),domList:null,mode:"light",toast:{}},i={show:Stream(!1),duration:Stream(2e3),status:Stream(null),msg:Stream(null)},l={shows:Stream([]),details:Stream(null)},u={details:Stream(null),search:Stream(null),user:Stream(null)},d={db:s.db,toast:i,Routes:a.default,state:n,user:{shows:[],lists:["Watching","Wishlist"],data:{}},data:l,errors:u};e.default=d})),require.register("components/action-sheet.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showSettings=void 0;var o=t("@ionic/core");e.showSettings=e=>{o.actionSheetController.create({header:"Settings",buttons:[{handler:()=>{e.state.mode="light"==e.state.mode?"dark":"light",document.body.classList.toggle("dark"),window.matchMedia("(prefers-color-scheme: dark)")},text:"light"==e.state.mode?"Enter Dark Mode":"Enter Light Mode"},{text:"Logout",handler:()=>{e.user.shows=[],e.user.data={},e.state.isAuth(!1),localStorage.removeItem("user"),m.route.set("/login")}}]}).then(e=>e.present())}})),require.register("components/card.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0;var o={view:e=>{var{attrs:{header:t,content:r,footer:o}}=e;return m("ion-card",m("ion-card-header",{translucent:!0},t),m("ion-card-content",r),m("ion-card-footer",o))}};e.Card=o})),require.register("components/index.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("./layout.js");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=t("./modal.js");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=t("./toast.js");Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===s[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var n=t("./list.js");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var i=t("./card.js");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}))})),require.register("components/layout.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormWrap=e.PageWrap=e.Layout=void 0;var o=l(t("../routes/index.js")),a=l(t("../Http.js")),s=t("../pages/fns.js"),n=t("./action-sheet"),i=l(t("./toast"));function l(e){return e&&e.__esModule?e:{default:e}}var u=()=>({view:e=>{var{attrs:{mdl:t}}=e;return m("ion-segment",{scrollable:!0,value:t.state.currentList()},t.user.lists.map(e=>m("ion-segment-button",{onclick:()=>{t.state.currentList(e),t.state.listDom.closeSlidingItems()},value:e},e)))}}),d=()=>({onremove:e=>{var{attrs:{mdl:t}}=e;return t.state.query(null)},view:e=>{var{attrs:{mdl:t}}=e;return m("ion-searchbar",{style:{paddingTop:"12px"},animated:!0,"show-cancel-button":"focus",placeholder:"Search for a show",value:t.state.query(),oninput:e=>t.state.query(e.target.value),onkeyup:()=>(e=>(0,s.searchShowsTask)(e)(a.default).fork((0,s.onError)(e)("search"),e.data.shows))(t)})}}),c=()=>({view:e=>{var{attrs:{mdl:t}}=e;return m("ion-header",m("ion-toolbar","home"==t.state.route.name&&m(u,{mdl:t}),"search"==t.state.route.name&&m(d,{mdl:t})))}}),p=()=>{var e=o.default.filter(e=>e.group.includes("authenticated"));return{view:t=>{var{attrs:{mdl:r}}=t;return m("ion-footer",m("ion-tab-bar",m("ion-tabs",[e.map(e=>m("ion-tab",{tab:"".concat(e.route)})),m("ion-tab-bar",{slot:"bottom"},[e.map(e=>m("ion-tab-button",{onclick:()=>m.route.set(e.route),tab:"".concat(e.route)},[m("ion-label",e.name),m("ion-icon",{name:e.icon})])),m("ion-tab-button",{onclick:()=>(0,n.showSettings)(r)},[m("ion-label","settings"),m("ion-icon",{name:"ellipsis-vertical-outline"})])])])))}}},f={view:e=>{var{attrs:{mdl:t},children:r}=e;return m("ion-app",[t.state.isAuth()&&m(c,{mdl:t}),m("ion-content",r),t.state.isAuth()&&m(p,{mdl:t}),t.toast.show()&&m(i.default,{mdl:t})])}};e.Layout=f;var h={view:e=>{var{children:t}=e;return m(".page",{slot:"fixed"},t)}};e.PageWrap=h;var g={view:e=>{var{children:t,attrs:{state:r}}=e;return m("form",(0,s.updateState)(r),t)}};e.FormWrap=g})),require.register("components/list.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0;var o,a=(o=t("Http"))&&o.__esModule?o:{default:o},s=t("ramda"),n=t("../pages/fns");var i=e=>setTimeout(()=>e.target.disabled=!0,2e3),l=e=>(0,s.without)([e.state.currentList()],e.user.lists)[0];e.List=e=>{var{attrs:{mdl:t}}=e;return{view:e=>{var{attrs:{mdl:t}}=e;return m("section.list",{onionInfinite:i},m("ion-list",{oncreate:e=>{var{dom:r}=e;t.state.listDom=r,r.closeSlidingItems()}},(0,s.sortBy)((0,s.prop)("name"),(0,n.filterShowsByListType)(t)).map(e=>m("ion-item-sliding",m("ion-item",{onclick:()=>{((e,t)=>{e.state.details.selected(t)})(t,e),t.state.listDom.closeSlidingItems()}},m("ion-thumbnail",m("ion-img",{src:e.image})),m("ion-label",{style:{paddingLeft:"12px"}},m("h2",e.name),m("p",m("i",e.status)),m("p",e.notes))),m("ion-item-options",{side:"start"},m("ion-item-option",{onclick:()=>{(e=>(t,r)=>(0,n.updateUserShowsTask)(e)(a.default)(t)(r).fork((0,n.onError)(e)("search"),t=>{m.route.set("/home"),e.user.shows=(0,s.sortBy)((0,s.prop)("name"),t)}))(t)(e,l(t)),t.state.listDom.closeSlidingItems()}},"move to ".concat(l(t)))),m("ion-item-options",m("ion-item-option",{color:"danger",side:"end",onclick:()=>{(e=>t=>(0,n.deleteShowTask)(e)(a.default)(t.objectId).fork((0,n.onError)(e)("details"),t=>{m.route.set("/home"),e.user.shows=(0,s.sortBy)((0,s.prop)("name"),t)}))(t)(e),t.state.listDom.closeSlidingItems()}},"Delete"))))),m("ion-infinite-scroll",{threshold:"100px",id:"infinite-scroll"},m("ion-infinite-scroll-content",{"loading-spinner":"dots","loading-text":"Checking for more shows..."})))}}}})),require.register("components/modal.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var o,a=t("@ionic/core"),s=(o=t("../Http"))&&o.__esModule?o:{default:o},n=t("../pages/fns"),i=t("ramda");var l={show:"",modal:null,status:null},u=e=>e.state.details.selected(null),d=e=>t=>{var r=JSON.parse(JSON.stringify(t)).response.message;l.error=t,(0,n.makeToast)({mdl:e,status:!1,msg:r})},c=e=>{l.show=e,l.error=null},p=e=>t=>(0,n.updateShowDetailsTask)(e)(s.default)(t).chain(t=>(0,n.getShowDetailsTask)(e)(s.default)(e.state.details.selected().objectId)).fork(d(e),t=>{(e=>t=>{e.user.shows=(0,i.sortBy)((0,i.prop)("name"),e.user.shows().filter(e=>e.tvmazeId!==t.tvmazeId).concat([t]))})(e)(t),c(t),(0,n.makeToast)({mdl:e,status:!0,msg:"Show successfully updated"})}),f=()=>{var e;return{oninit:t=>{var{attrs:{mdl:r,ep:{href:o}}}=t;return(t=>r=>(0,n.getEpisodeTask)(s.default)(r).fork(d(t),t=>e=t))(r)(o)},onremove:()=>e=null,view:t=>{var{attrs:{ep:{label:r}}}=t;return e&&m(".",[m("h3",r),m("ion-img",{src:e.image}),m("ion-item",m("ion-label",e.name),m("p",e.airdate),m("ion-label","Season - Ep:"),m("p","".concat(e.season," - ").concat(e.number)))])}}};e.Modal=()=>({oninit:e=>{var{attrs:{mdl:t}}=e;return(e=>e.state.details.selected().objectId?(0,n.getShowDetailsTask)(e)(s.default)(e.state.details.selected().objectId).fork(d(e),c):(0,n.getShowTvMazeDetailsTask)(s.default)(e.state.details.selected()).fork(d(e),c))(t)},oncreate:e=>{var{dom:t}=e;a.modalController.create({component:t,backdropDismiss:!1}).then(e=>{l.modal=e,l.modal.present()})},onremove:e=>{var{attrs:{mdl:t}}=e;return l.modal&&l.modal.dismiss().then(()=>{l.modal=null,l.show=null,u(t)})},onbeforeremove:e=>{var{attrs:{mdl:t}}=e;return l.modal.dismiss().then(()=>{l.modal=null,l.show=null,u(t)})},view:e=>{var{attrs:{mdl:t}}=e;return m("ion-modal-view",l.show&&[m("ion-header",m("ion-toolbar",m("ion-title","".concat(l.show.name," - ").concat(l.show.premiered&&l.show.premiered.split("-")[0]," | ").concat(l.show.network||l.show.webChannel)),m("ion-buttons",{slot:"primary"},m("ion-button",{onclick:e=>u(t)},m("ion-icon",{slot:"icon-only",name:"close"})))),!l.show.listStatus&&m("ion-item",m("ion-label","Add to: "),m("ion-buttons",t.user.lists.map(e=>m("ion-button.ion-activatable ripple-parent",{onclick:r=>(e=>(t,r)=>(0,n.addUserShowsTask)(e)(s.default)(t)(r).fork(d(e),t=>{e.user.shows=t,u(e)}))(t)(l.show,e)},m("ion-ripple"),e))))),m("ion-content",{padding:!0},m("ion-grid",m("ion-row",m("ion-col",m("ion-img",{src:l.show.image})),m("ion-col",m.trust(l.show.summary))),m("ion-row",m("ion-col",m("pre","status: ".concat(l.show.status))),m("ion-col",l.show.listStatus&&m("pre","list status: ".concat(l.show.listStatus)))),l.show.listStatus&&m("ion-row",m("ion-textarea",{placeholder:"Notes",value:l.show.notes,onchange:e=>l.show.notes=e.target.value}),m("ion-button",{onclick:()=>p(t)({notes:l.show.notes})},"Save note"))),m("",m("h3","Episodes"),l.show.links.map(e=>m(f,{mdl:t,ep:e}))))])}})})),require.register("components/toast.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("@ionic/core"),a=()=>({view:e=>{var{attrs:{mdl:t}}=e;return m("ion-toast",{oncreate:e=>{var{dom:r}=e;o.toastController.create({component:r,message:t.toast.msg(),duration:t.toast.duration(),showCloseButton:!0,animated:!0,color:t.toast.status()?"success":"danger"}).then(e=>e.present())}})}});e.default=a})),require.register("config.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayFP=void 0;var o=e=>({value:e,writable:!0,configurable:!0,enumerable:!1}),a=e=>e.reduce((e,t)=>e.concat(t),[]),s={configure:e=>{Object.defineProperty(Array.prototype,"fmap",o((function(e){return this.map(t=>e(t))})));Object.defineProperty(Array.prototype,"empty",o(e=>[]));Object.defineProperty(Array.prototype,"chain",o((function(e){return a(this.fmap(e))})));Object.defineProperty(Array.prototype,"of",o(e=>[e]));Object.defineProperty(Array.prototype,"ap",o((function(e){return a(this.map(t=>e.map(e=>t(e))))})));Object.defineProperty(Array.prototype,"traverse",o((function(e,t){return this.reduce((t,r)=>e(r).map(e=>t=>t.concat(e)).ap(t),t([]))})));Object.defineProperty(Array.prototype,"any",o((function(){return this.length>0})));Object.defineProperty(Array.prototype,"insertAt",o((function(e,t){return this.splice(e,0,item)})));Object.defineProperty(Array.prototype,"last",o((function(){return this[this.length-1]})));Object.defineProperty(Array.prototype,"in",o((function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return!0;return!1})));Object.defineProperty(Array.prototype,"pushIfNotExist",o((function(e,t){this.in(t)||this.push(e)})));Object.defineProperty(Array.prototype,"foldM",o((function(e,t){var r=o=>this.any()?t(o,this.shift()).chain(r):e(o);return r})))}};e.ArrayFP=s})),require.register("index.js",(function(e,t,r){"use strict";var o=s(t("./App.js")),a=s(t("Models"));function s(e){return e&&e.__esModule?e:{default:e}}t("./config").ArrayFP.configure();var n=document.body;r.hot&&r.hot.accept(),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("⚙️ SW registered: ",e)}).catch(e=>{console.log("🧟 SW registration failed: ",e)})}),localStorage.getItem("user")&&(a.default.user=JSON.parse(localStorage.getItem("user")),a.default.state.isAuth(!0),m.route.set("/home")),m.route(n,"/login",(0,o.default)(a.default))})),require.register("initialize.js",(function(e,t,r){"use strict";document.addEventListener("DOMContentLoaded",()=>t("./index.js"))})),require.register("pages/fns.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loginUserTask=e.registerUserTask=e.getEpisodeTask=e.filterShowForUnselected=e.filterShowsByListType=e.getShowDetailsTask=e.getShowTvMazeDetailsTask=e.updateShowDetailsTask=e.deleteShowTask=e.updateUserShowsTask=e.addUserShowsTask=e.toDto=e.showListSelection=e.propIsDefined=e.searchShowsTask=e.getShows=e.updateShowStatus=e.onError=e.toDbModel=e.toSearchViewModel=e.formatError=e.makeToast=e.updateState=e.log=void 0;var o=t("ramda");e.log=e=>t=>(console.log(e,t),t);e.updateState=e=>({onkeyup:t=>e[t.target.name]=t.target.value});var a=e=>{var{mdl:t,status:r,msg:o}=e;t.toast.show(!0),t.toast.status(r),t.toast.msg(o),setTimeout(()=>(e=>{e.toast.show(!1),e.toast.msg(null),e.toast.status(null)})(t),t.toast.duration())};e.makeToast=a;e.formatError=e=>JSON.parse(JSON.stringify(e));var s=e=>t=>r=>({label:e,href:i((0,o.view)((0,o.lensPath)([t,"href"]),r))}),n=e=>{var t,{name:r,season:a,number:n,airdate:l,image:u,_links:d}=e;return{name:r,season:a,number:n,airdate:l,image:u&&(i(u.original)||i(u.medium)),links:(t=d,[s("self")("self")(t)].filter(e=>!(0,o.propEq)("href",void 0)(e)))}},i=e=>e&&e.replace("http","https"),l=e=>{var{name:t,image:r,id:o}=e;return{image:r&&(i(r.original)||i(r.medium)),tvmazeId:o,name:t}};e.toSearchViewModel=l;var u=e=>t=>{var{listStatus:r,notes:o,name:a,tvmazeId:s,image:n,status:i}=t;return{image:n,listStatus:r,notes:o,name:a,tvmazeId:s,status:i,userId:e}};e.toDbModel=u;e.onError=e=>t=>r=>{e.errors[t](r),a({mdl:e,msg:JSON.parse(r).message,status:!1})};var d=e=>t=>t.map(t=>{return(0,o.compose)((r=t,e=>e?(0,o.assoc)("objectId",e.objectId,(0,o.set)((0,o.lensProp)("listStatus"),(0,o.prop)("listStatus",e),r)):r),(0,o.find)((0,o.propEq)("tvmazeId",t.tvmazeId)))(e);var r});e.updateShowStatus=d;var c=e=>t=>t.getTask(t.backendlessUrl("data/".concat(e.db,"?pagesize=100&where=userId%3D'").concat(e.user.data.objectId,"'"))).map((0,o.sortBy)((0,o.propEq)("name")));e.getShows=c;e.searchShowsTask=e=>t=>{return t.getTask(t.searchUrl(e.state.query())).map((0,o.pluck)("show")).map((0,o.map)(l)).map((r="image",e=>(0,o.reject)((0,o.propEq)(r,e)))(null)).map(d(e.user.shows));var r};var m=e=>t=>(0,o.equals)((0,o.prop)("tvmazeId",t),e.state.searchItem.showMenu()),p=e=>(0,o.compose)(o.not,(0,o.propEq)(e,void 0));e.propIsDefined=p;e.showListSelection=e=>(0,o.anyPass)([m(e),p("objectId")]);var f=(e,t,r)=>(0,o.compose)((e=>t=>({body:u(e.user.data.objectId)(t)}))(e),(e=>t=>(t.order=(0,o.filter)((0,o.propEq)("listStatus",t.listStatus),e.user.shows).length,t))(e),(e=>t=>(0,o.over)((0,o.lensProp)("listStatus"),()=>t,e))(t))(r);e.toDto=f;e.addUserShowsTask=e=>t=>r=>o=>t.postTask(t.backendlessUrl("data/".concat(e.db)),f(e,r,o)).chain((e=>t=>r=>t.postTask(t.backendlessUrl("data/Users/".concat(e.user.data.objectId,"/shows%3A").concat(e.db,"%3A1")),{body:[r.objectId]}))(e)(t)).chain(r=>c(e)(t));e.updateUserShowsTask=e=>t=>r=>o=>t.putTask(t.backendlessUrl("data/".concat(e.db,"\\").concat(r.objectId)),f(e,r,o)).chain(r=>c(e)(t));e.deleteShowTask=e=>t=>r=>t.deleteTask(t.backendlessUrl("data/".concat(e.db,"/").concat(r))).chain(r=>c(e)(t));e.updateShowDetailsTask=e=>t=>r=>t.putTask(t.backendlessUrl("data/".concat(e.db,"/").concat(e.state.details.selected().objectId)),{body:r}).chain(r=>{var{objectId:o}=r;return g(e)(t)(o)});var h=e=>t=>e.getTask(e.tvMazeDetailsUrl(t.tvmazeId)).map((e=>{var{image:t,tvmazeId:r,objectId:a,listStatus:n,name:i,notes:l}=e;return e=>{var u,{webChannel:d,status:c,network:m,genres:p,premiered:f,summary:h,_links:g}=e;return{name:i,notes:l,genre:(0,o.join)(" ",p),premiered:f,summary:h,links:(u=g,[s("previous")("previousepisode")(u),s("next")("nextepisode")(u)].filter(e=>!(0,o.propEq)("href",void 0)(e))),image:t,tvmazeId:r,objectId:a,listStatus:n,webChannel:d&&d.name,network:m&&m.name,status:c}}})(t));e.getShowTvMazeDetailsTask=h;var g=e=>t=>r=>(e=>t=>r=>t.getTask(t.backendlessUrl("data/".concat(e.db,"/").concat(r))))(e)(t)(r).chain(h(t));e.getShowDetailsTask=g;e.filterShowsByListType=e=>(0,o.filter)((0,o.propEq)("listStatus",e.state.currentList()),e.user.shows);e.filterShowForUnselected=e=>{var t=(0,o.pluck)("tvmazeId",e.user.shows);return e.data.shows().filter(e=>!t.includes(e.tvmazeId))};e.getEpisodeTask=e=>t=>e.getTask(t).map(n);e.registerUserTask=e=>t=>{var{name:r,email:o,password:a}=t;return e.postTask(e.backendlessUrl("users/register"),{body:{name:r,email:o,password:btoa(a)}})};e.loginUserTask=e=>t=>{var{email:r,password:o}=t;return e.postTask(e.backendlessUrl("users/login"),{body:{login:r,password:btoa(o)}})}})),require.register("pages/home.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Home=void 0;var o,a=(o=t("../Http.js"))&&o.__esModule?o:{default:o},s=t("./fns.js"),n=t("components");e.Home=()=>({oninit:e=>{var{attrs:{mdl:t}}=e;return(e=>t=>(0,s.getShows)(e)(t).fork(s.onError,t=>e.user.shows=t))(t)(a.default)},view:e=>{var{attrs:{mdl:t}}=e;return t.state.details.selected()?m(n.Modal,{mdl:t}):m(n.List,{mdl:t})}})})),require.register("pages/index.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("./login.js");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=t("./register.js");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=t("./home.js");Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===s[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var n=t("./search-page.js");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))})),require.register("pages/login.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Login=void 0;var o,a=(o=t("../Http.js"))&&o.__esModule?o:{default:o},s=t("./fns"),n=t("components");e.Login=e=>{var{attrs:{mdl:t}}=e,r={name:"",email:"",password:"",confirm:"",errors:""};return{view:()=>m(n.Card,{header:m("ion-card-title",{color:"primary"},m("h3.ion-text-center","Login to your account!")),content:m(n.FormWrap,{state:r},m("ion-item",m("ion-input",{name:"email",type:"email",placeholder:"your@email.com",ngmodel:"",required:"required"})),m("ion-item",m("ion-input",{name:"password",type:"password",placeholder:"Password",ngmodel:"",required:"required"}))),footer:[m("ion-button",{size:"large",expand:"block",onclick:e=>{return o=r,void(0,s.loginUserTask)(a.default)(o).fork(e=>{r.errors=JSON.parse(JSON.stringify(e)),t.state.isAuth(!1),(0,s.makeToast)({mdl:t,msg:r.errors.response.message,status:!1})},e=>{r.errors="",t.state.isAuth(!0),t.user.data=e,localStorage.setItem("user",JSON.stringify(t.user)),m.route.set("/home")});var o}},"Login"),m(m.route.Link,{href:"/register"},m("ion-text",{color:"warning"},"Need to Register?"))]})}}})),require.register("pages/register.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Register=void 0;var o,a=(o=t("../Http.js"))&&o.__esModule?o:{default:o},s=t("./fns"),n=t("components");e.Register=e=>{var{attrs:{mdl:t}}=e,r={name:"",email:"",password:"",confirm:"",errors:""};return{view:()=>m(n.Card,{header:m("ion-card-title",{color:"warning"},m("h3.ion-text-center","Create An Account")),content:m(n.FormWrap,{state:r},m("ion-item",m("ion-input",{name:"name",type:"text",placeholder:"Name",required:"required",value:r.name})),m("ion-item",m("ion-input",{name:"email",type:"email",placeholder:"your@email.com",required:"required",value:r.email})),m("ion-item",m("ion-input",{name:"password",type:"password",placeholder:"Password",required:"required",value:r.password})),m("ion-item",m("ion-input",{name:"confirm",type:"password",placeholder:"Confirn Password",required:"required",value:r.cornfim}))),footer:[m("ion-button",{size:"large",expand:"block",onclick:()=>{return e=r,void(0,s.registerUserTask)(a.default)(e).fork(e=>{r.errors=JSON.parse(JSON.stringify(e)),t.state.isAuth(!1),(0,s.makeToast)({mdl:t,msg:r.errors.response.message,status:!1})},e=>{r.errors="",t.state.isAuth(!0),t.user.data=e,localStorage.setItem("user",JSON.stringify(t.user)),m.route.set("/home")});var e}},"Register"),m(m.route.Link,{href:"/login"},"Need to Login?")]})}}})),require.register("pages/search-page.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchPage=void 0;var o,a=(o=t("../Http.js"))&&o.__esModule?o:{default:o},s=t("./fns.js"),n=t("components");e.SearchPage=()=>({view:e=>{var{attrs:{mdl:t}}=e;return t.state.details.selected()?m(n.Modal,{mdl:t}):t.state.isLoading()?m("ion-spinner",{color:"primary",name:"crescent"}):m("ion-list",{oncreate:e=>{var{dom:r}=e;t.state.listDom=r,r.closeSlidingItems()}},(0,s.filterShowForUnselected)(t).any()?(0,s.filterShowForUnselected)(t).map((e,r)=>m("ion-item-sliding",{key:r},m("ion-item",{onclick:()=>((e,t)=>e.state.details.selected(t))(t,e)},m("ion-thumbnail",{style:{"border-radius":"0"}},m("ion-img",{src:e.image})),m("ion-label",{style:{paddingLeft:"12px"}},m("h2",e.name))),m("ion-item-options",{side:"start"},t.user.lists.map(r=>m("ion-item-option",{onclick:()=>{(e=>(t,r)=>(0,s.addUserShowsTask)(e)(a.default)(t)(r).fork((0,s.onError)(e)("search"),t=>e.user.shows=t))(t)(e,r),t.state.listDom.closeSlidingItems()}},r))))):m(n.Card,{header:m("ion-card-title","Search For Shows")}))}})})),require.register("routes/auth-routes.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("pages"),a=t("components"),s=[{id:"home",name:"home",icon:"home",route:"/home",isNav:!1,group:["authenticated"],children:[],options:[],onmatch:(e,t,r,o)=>{},component:e=>m(a.Layout,{mdl:e},m(o.Home,{mdl:e}))},{id:"search",name:"search",icon:"search-outline",route:"/search",isNav:!1,group:["authenticated"],children:[],options:[],onmatch:(e,t,r,o)=>{},component:e=>m(a.Layout,{mdl:e},m(o.SearchPage,{mdl:e}))}];e.default=s})),require.register("routes/index.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(t("./auth-routes.js")),a=s(t("./main-routes.js"));function s(e){return e&&e.__esModule?e:{default:e}}var n=(0,t("ramda").flatten)([a.default,o.default]);e.default=n})),require.register("routes/main-routes.js",(function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("pages"),a=t("components"),s=[{id:"login",name:"login",icon:"login",route:"/login",isNav:!1,group:[],children:[],options:[],onmatch:(e,t,r,o)=>{},component:e=>m(a.Layout,{mdl:e},m(a.PageWrap,m(o.Login,{mdl:e})))},{id:"register",name:"register",icon:"register",route:"/register",isNav:!1,group:[],children:[],options:[],onmatch:(e,t,r,o)=>{},component:e=>m(a.Layout,{mdl:e},m(a.PageWrap,m(o.Register,{mdl:e})))}];e.default=s})),require.alias("process/browser.js","process"),require("process"),require.register("___globals___",(function(e,t,r){window.m=t("mithril"),window.Stream=t("mithril-stream")}))}(),require("___globals___"),require("initialize");
